<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://tools-static.wmflabs.org/cdnjs/ajax/libs/leaflet/1.3.1/leaflet.css">
		<link rel="stylesheet" href="https://tools-static.wmflabs.org/map-of-monuments/stylesheet.css">
		<link rel="stylesheet" href="https://tools-static.wmflabs.org/map-of-monuments/MarkerCluster/MarkerCluster.css">
		<link rel="stylesheet" href="https://tools-static.wmflabs.org/map-of-monuments/MarkerCluster/MarkerCluster.Default.css">
		<title>Mapa památek</title>
	</head>
	<body>
		<div class="navbar">
			<h1 class="navbar-brand">Mapa památek</h1>
			<a href="#">Open source repo</a>
		</div>

		<div class="container">
			<form>
				<div class="row">
					<div class="col-6">
						<label for="startswith">Najít pouze kulturní památky začínající na: </label><input type="text" id="startswith" name="startswith" value="{{ startswith }}"><br />
					</div>
					<div class="col-6">
						<label for="contains">Najít pouze kulturní památky obsahující: </label><input type="text" id="contains" name="contains" value="{{ contains }}"><br />
					</div>
				</div>

				<input class="btn btn-primary btn-block" type="submit" value="Hledat" />
			</form>
			<div id="map"></div>
		</div>

		<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/jquery/3.3.1/jquery.min.js" charset="utf-8"></script>
		<script src="https://tools-static.wmflabs.org/cdnjs/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
		<script src="https://tools-static.wmflabs.org/map-of-monuments/MarkerCluster/leaflet.markercluster-src.js"></script>
		<script src="get_monuments?startswith={{ startswith }}&contains={{ contains }}"></script>
		<script>
			var style = 'osm-intl';
			var server = 'https://maps.wikimedia.org/';

			// Create a map
			var map = L.map('map');
			map.setView([50, 16], 7);
			L.tileLayer(server + style + '/{z}/{x}/{y}.png', {
						maxZoom: 18,
						id: 'wikipedia-map-01',
						attribution: 'Wikimedia maps beta | Map data &copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap contributors</a>'
			}).addTo(map);
			
			var markers = L.markerClusterGroup();
			for (var i = 0; i < addressPoints.length; i++) {
				var a = addressPoints[i];
				var title = a[2];
				var marker = L.marker(new L.LatLng(a[0], a[1]), { title: title });
				marker.bindPopup(title);
				markers.addLayer(marker);
			}
			map.addLayer(markers);
		</script>
	</body>
</html>
