{% extends 'base.html' %}
{% block content %}
<div class="container">
    <form>
        <p class="intro">{{ _("introduction") }}</p>
        <div class="row">
            <div class="col-6">
                <label for="startswith">{{ _("search-startswith") }}: </label><input type="text" id="startswith" name="startswith" value="{{ startswith }}"><br />
            </div>
            <div class="col-6">
                <label for="contains">{{ _("search-contains") }}: </label><input type="text" id="contains" name="contains" value="{{ contains }}"><br />
            </div>
        </div>

        <input class="btn btn-primary btn-block" type="submit" value="{{ _("search") }}" />
    </form>
    <div id="map"></div>

</div>
{% endblock %}

{% block scripts %}
<script src="get_monuments?startswith={{ startswith }}&contains={{ contains }}"></script>
<script>
    var style = 'osm-intl';
    var server = 'https://maps.wikimedia.org/';

    // Create a map
    var map = L.map('map');
    map.setView([50, 16], 7);
    L.tileLayer(server + style + '/{z}/{x}/{y}.png', {
                maxZoom: 18,
                id: 'wikipedia-map-01',
                attribution: '{{ _("map-copyright")|safe }}'
    }).addTo(map);
    
    var markers = L.markerClusterGroup();
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        var html = a[2];
        var marker = L.marker(new L.LatLng(a[0], a[1]), { title: a[3] });
        marker.bindPopup(html);
        markers.addLayer(marker);
    }
    map.addLayer(markers);
</script>
{% endblock scripts %}
